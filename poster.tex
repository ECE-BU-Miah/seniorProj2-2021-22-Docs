%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Jacobs Landscape Poster
% LaTeX Template
% Version 1.0 (29/03/13)
%
% Created by:
% Computational Physics and Biophysics Group, Jacobs University
% https://teamwork.jacobs-university.de:8443/confluence/display/CoPandBiG/LaTeX+Poster
% 
% Further modified by:
% Nathaniel Johnston (nathaniel@njohnston.ca)
%
% This template has been downloaded from:
% http://www.LaTeXTemplates.com
%
% License:
% CC BY-NC-SA 3.0 (http://creativecommons.org/licenses/by-nc-sa/3.0/)
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%----------------------------------------------------------------------------------------
%	PACKAGES AND OTHER DOCUMENT CONFIGURATIONS
%----------------------------------------------------------------------------------------

\documentclass[final]{beamer}

\usepackage[scale=1.24]{beamerposter} % Use the beamerposter package for laying out the poster

\usepackage{tikz}
\usepackage{todonotes}
\usepackage{epstopdf}
\epstopdfsetup{suffix = {}}
\usepackage{hyperref}
\usepackage{subfigure}  % Written by Steven Douglas Cochran
\usepackage{amssymb,amsmath,bm}    % From the American Mathematical Society
\usepackage{siunitx} % for units like degree, ...
%\sisetup{unitsep=\cdot,binary-units=true}
\usepackage{mathtools}
\usepackage{xcolor,soul}
\usepackage{geometry}
\usetheme{confposter} % Use the confposter theme supplied with this template
\usetikzlibrary{calc}

\setbeamercolor{block title}{fg=BUred,bg=white} % Colors of the block titles
\setbeamercolor{block body}{fg=black,bg=white} % Colors of the body of blocks
\setbeamercolor{block alerted title}{fg=BUred,bg=gray!70} % Colors of the highlighted block titles
\setbeamercolor{block alerted body}{fg=black,bg=gray!10} % Colors of the body of highlighted blocks


% Many more colors are available for use in beamerthemeconfposter.sty

%-----------------------------------------------------------
% Define the column widths and overall poster size
% To set effective sepwid, onecolwid and twocolwid values, first choose how many columns you want and how much separation you want between columns
% In this template, the separation width chosen is 0.024 of the paper width and a 4-column layout
% onecolwid should therefore be (1-(# of columns+1)*sepwid)/# of columns e.g. (1-(4+1)*0.024)/4 = 0.22
% Set twocolwid to be (2*onecolwid)+sepwid = 0.464
% Set threecolwid to be (3*onecolwid)+2*sepwid = 0.708

\newlength{\sepwid}
\newlength{\onecolwid}
\newlength{\twocolwid}
\newlength{\threecolwid}
\setlength{\paperwidth}{48in} % A0 width: 46.8in
\setlength{\paperheight}{36in} % A0 height: 33.1in
\setlength{\sepwid}{0.022\paperwidth} % Separation width (white space) between columns
\setlength{\onecolwid}{0.22\paperwidth} % Width of one column
\setlength{\twocolwid}{0.464\paperwidth} % Width of two columns
\setlength{\threecolwid}{0.708\paperwidth} % Width of three columns
\setlength{\topmargin}{-0.25in} % Reduce the top margin size
\setlength{\leftmargin}{-0.25in}
\setlength{\rightmargin}{-0.25in}

%-----------------------------------------------------------

\usepackage{graphicx}  % Required for including images

\usepackage{booktabs} % Top and bottom rules for tables
%\usepackage{subfigure}

%-----------------------------------------------------------
% TITLE SECTION
%-----------------------------------------------------------

\title{Plant Modeling for an Autonomous Vehicle} % Poster title

\author{Nick Nauman, Hannah Grady, Advisor: Dr. Suruz Miah} % Author(s)


\institute{Department of Electrical and Computer Engineering, Bradley University, Peoria IL} %Institution(s)
\vskip -.5cm

%-----------------------------------------------------------
% POSTER CONTENT
%-----------------------------------------------------------

\begin{document}

\addtobeamertemplate{block end}{}{\vspace*{1ex}} % White space under blocks
\addtobeamertemplate{block alerted end}{}{\vspace*{2ex}} % White space under highlighted (alert) blocks

\setlength{\belowcaptionskip}{2ex} % White space under figures
%\setlength\belowdisplayshortskip{2ex} % White space under equations

\begin{frame}[t] % The whole poster is enclosed in one beamer frame

\begin{columns}[t]

\begin{column}{\sepwid}\end{column} % Empty spacer column

\begin{column}{\onecolwid} % The first column

%-----------------------------------------------------------
% OBJECTIVE AND CONTRIBUTION
%-----------------------------------------------------------

\begin{alertblock}{Objective and Contributions}
%
\textbf{Objective}
%\vskip -0.75cm
\begin{itemize}
    \item Provide accurate plant models of each autonomous vehicle subsystem to be used for designing controllers
\end{itemize}
%\begin{itemize}
%    \item Develop a platform that allows mobile devices to control helicopters with the least amount of error via an embedded system 
%\end{itemize}
%
%\vskip -1cm
\textbf{Contribution}
%\vskip -0.75cm
\begin{itemize}
	\item Determine if System Identification or Neural Network modeling produces better models 
	\item Non-linearity modeling
%    \item Determine trade-offs between traditional control techniques and machine learning
    %\item Embedded System Implementation
    %\item Mobile Device Control 
    %\item Multi-Helicopter Application
\end{itemize}
%\vskip -0.75cm
\textbf{Applications}
%\vskip -0.75cm
\begin{itemize}
	\item Use in testing to help develop more accurate vehicle controllers
	\item Create a guide for modeling future vehicle subsystems
%    \item Teleoperation approach to search and rescue 
%    \item Aerial turbulence resistance 
\end{itemize}

%


\end{alertblock}

%-----------------------------------------------------------
% PROBLEM SETUP
%-----------------------------------------------------------
%\vskip -1cm
\begin{alertblock}{Problem Setup}



%\vskip -1cm
\begin{itemize}
	\item Conducted a literature review to look for existing solutions
	\item System Architecture 
\end{itemize}
 

\begin{figure}
	\centering
	\includegraphics[width=1.0\linewidth]{figs/inkscape/steeringModelBlockDiagram}
	\caption{Steering subsystem block diagram}
\end{figure}

\begin{figure}
	\centering
	\includegraphics[width=0.48\linewidth]{figs/inkscape/accelerationModelArchitecture}
	\caption{Acceleration subsystem block diagram}
\end{figure}

\begin{figure}
	\centering
	\includegraphics[width=0.48\linewidth]{figs/inkscape/brakeModelArchitecture}
	\caption{Brake subsystem block diagram}
\end{figure}


$\bullet$ Collected data using a Lexus RX450H vehicle platform  

\begin{figure}
	\centering
	\includegraphics[width=0.48\linewidth]{figs/inkscape/carSystemModelOutline}
	\caption{Lexus vehicle with subsystems}
\end{figure}

\begin{figure}
	\centering
	\includegraphics[width=0.48\linewidth]{figs/img/picturesVisitToAStuff/visitors1-20211007}
	\caption{AutonomouStuff Lexus RX450H vehicle}
\end{figure}

\vskip -1cm
\end{alertblock}

\end{column} % End of the first column

\begin{column}{\sepwid}\end{column} % Empty spacer column

\begin{column}{\onecolwid} % The second column

%-----------------------------------------------------------
% TRANSFER FUNCTION MODELING
%-----------------------------------------------------------

\begin{alertblock}{Transfer Function Modeling}
\vskip 0.5cm
\begin{itemize}
    \item MATLAB's System Identification Toolbox used to create models 
    \item Models needed to meet best fit and error requirements 

\end{itemize} 
\vskip -1cm
\begin{figure}
	\centering
	{\includegraphics[width=0.48\linewidth]{figs/img/byWireSteeringTransferFunctionModel}}
		{\includegraphics[width=0.48\linewidth]{figs/img/manualSteeringTransferFunctionModel}}
	\caption{Steering System Estimated Steering Angle Comparison}
\end{figure}

\begin{figure}
	\centering
	{\includegraphics[width=0.48\linewidth]{figs/img/byWireAccelArxModel}}
	{\includegraphics[width=0.48\linewidth]{figs/img/manualAccelTransferFunctionModel}}
	\caption{Acceleration System Estimated Pedal Position Comparison}
\end{figure}

%\vskip -2.5cm
\end{alertblock}

%-----------------------------------------------------------
% NEURAL NETWORK MODELING 
%-----------------------------------------------------------

\begin{alertblock}{Neural Network Modeling}
\vskip 0.5cm
\begin{itemize}
    \item Used MATLAB's Neural Network Time Series App
    \item Generated models using the Bayesian Regularization Algorithm
    \item Models trained using collected log data  
\end{itemize} 

\begin{figure}
    \centering
		{\includegraphics[width=0.48\linewidth]{figs/img/steeringNeuralNetworkTrainedOutput}}
		{\includegraphics[width=0.48\linewidth]{figs/img/steeringNeuralNetworkTrainedOutput}}
	\caption{ Steering System Training Plots}
    \label{fig:SteeringSysNeuralNetwork}
\end{figure}

%\begin{figure}
%    \centering
%		{\includegraphics[width=0.48\linewidth]{figs/img/accelNeuralNetworkTrainedOutput}}
%		{\includegraphics[width=0.48\linewidth]{figs/img/accelNeuralNetworkTrainedOutput2}}
%	\caption{Acceleration System Training Plots}
%    \label{fig:AccelerationSysNeuralNetwork}
%\end{figure}

\begin{figure}
    \centering
		{\includegraphics[width=0.48\linewidth]{figs/img/brake_new_neuralNetworkFig}}
		{\includegraphics[width=0.48\linewidth]{figs/img/brake_new_neuralNetworkFigLog2Test}}
	\caption{ Brake System Training Plots}
    \label{fig:BrakeSysNeuralNetwork}
\end{figure}


%\vskip -2.5cm
\end{alertblock}



\end{column} % End of second column

\begin{column}{\sepwid}\end{column} % Empty spacer column

\begin{column}{\onecolwid} % The third column
%-----------------------------------------------------------
% NEURAL NETWORK ALGORITHM 
%-----------------------------------------------------------

\begin{alertblock}{Neural Network Algorithm}
\vskip 0.5cm

 \begin{figure}
  \centering
      \tikzset{%
        input neuron/.style={
          circle,
          fill=green!50,
          minimum size=0.7cm
        },
        neuron missing/.style={
          draw=none, 
          scale=1,
          fill=white,
          text height=0.01cm,
          execute at begin node=\color{black}$\vdots$
        },
      }

      \tikzset{%
        hidden neuron/.style={
          circle,
          fill=blue!50,
          minimum size=0.7cm
        },
        neuron missing/.style={
          draw=none, 
          scale=1,
          fill=white,
          text height=0.01cm,
          execute at begin node=\color{black}$\vdots$
        },
      }

      \tikzset{%
        output neuron/.style={
          circle,
          fill=red!50,
          minimum size=0.7cm
        },
        neuron missing/.style={
          draw=none, 
          scale=1,
          fill=white,
          text height=0.01cm,
          execute at begin node=\color{black}$\vdots$
        },
      }      

      \begin{tikzpicture}[x=3cm, y=3cm]

        \foreach \m/\l [count=\y] in {1,2,missing,3}
        \node [input neuron/.try, neuron \m/.try] (input-\m) at (0,2.5-\y) {};

        \foreach \m [count=\y] in {1,2,3,missing,4}
        \node [hidden neuron/.try, neuron \m/.try ] (hidden-\m) at (2,2.5-\y*1.1) {};

        \foreach \m [count=\y] in {1,missing,2}
        \node [output neuron/.try, neuron \m/.try] (output-\m) at (4,2.5-\y*1.2) {};

        \foreach \l [count=\i] in {1,2,n}
        \draw [<-] (input-\i) -- ++(-1,0)
        node [above, midway] {$\mathbf{e}_{k,\l}$};

        \foreach \l [count=\i] in {1,2,3,\mbox{$\bar{n}$}}
        \node [above] at (hidden-\i.north) {$\sigma_{\l}$};

        \foreach \l [count=\i] in {1,m}
        \draw [->] (output-\i) -- ++(1,0)
        node [above, midway] {$\hat{u}_{a,k}^{(\l)}$};

        \foreach \i in {1,...,3}
        \foreach \j in {1,...,4}
        \draw [->] (input-\i) -- (hidden-\j);

        \foreach \i in {1,...,4}
        \foreach \j in {1,2}
        \draw [->] (hidden-\i) -- (output-\j);


        
        \foreach \l [count=\x from 0] in {Input, Hidden, Ouput}
        \node [align=center, above] at (\x*2,1.9) {\l \\ layer};

        \node [align=center, below] at (3,-2.5) {Weight \\ $\mathbf{W}_a$};
        \draw[->,ultra thick](3,-2.5) -- (3,1.6);
        
      \end{tikzpicture}
  \caption{Actor neural network structure for approximating control input.}
  \label{fig:nnActor}
\end{figure}

\vskip .5cm

%\begin{enumerate}
%	\item Approximate neural network signal
%	\begin{align*}
%  		\hat{\mathbf{u}}_{a,k} = \mathbf{W}_a^T\bm{\sigma}(\mathbf{e}_k),
%  	\end{align*}
%  	\item Define the weight matrix
%  	\begin{align*}
%  		{\bf W}_a = 
%  		\begin{bmatrix}
%    		w_a^{1,1} &  w_a^{1,2} & \ldots &w_a^{1,m}\\
%    		w_a^{2,1} & w_a^{2,2}& \ldots &w_a^{1,m}\\
%    		\vdots & \ddots & \ldots &\vdots\\
%    		w_a^{\bar{n},1} & w_a^{\bar{n},2}& \ldots &w_a^{\bar{n},m}
%  		\end{bmatrix}.
%	\end{align*}
%	\item Compute the sum-of-squared error
%	\begin{align*}
%    		\bm{\Sigma}\mathbf{W}_a \approx  \mathbf{U}^{[d]},\qquad\text{with}
%    		% \hat{\mathbf{U}} \approx \mathbf{U}^{[d]}, 
%  	\end{align*}	
%  	\begin{align*}
%  		\bm{\Sigma}\mathbf{W}_a\equiv \hat{\mathbf{U}}
%  	\end{align*}
%	\begin{align*}
%    		\delta_a = \frac{1}{2}\|\mathbf{U}^{[d]} - \hat{\mathbf{U}}\|^2
%  	\end{align*}
%  	\item Find the actor weight by minimizing the sum-of-square error
%  	\begin{align*}
%  	\delta_a = \frac{1}{2}\mathrm{Tr}\left[({\bf U}^{[d]} - \bm{\Sigma} {\bf W}_a)^T({\bf U}^{[d]} - \bm{\Sigma} {\bf W}_a)\right].
%	\end{align*}
%	\item Take the derivative of $\delta_a$ with respect to ${\bf W}_a$ and set $\frac{\partial\delta_a}{\partial\mathbf{W}_a}$ to zero
%	\begin{align*}
%  		\frac{\partial\delta_a}{\partial\mathbf{W}_a} = - \bm{\Sigma}^T\mathbf{U}^{[d]} + \bm{\Sigma}^T 					\bm{\Sigma}\mathbf{W}_a
%	\end{align*}
%	\begin{align*}
%  		{\bf W}_a = \left(\bm{\Sigma}^T\bm{\Sigma}\right)^T\bm{\Sigma}^T{\bf U}^{[d]}.
%	\end{align*}
%	\item Use the gradient descent approach to minimize the least square order alter weights when training the neural network
%	\begin{multline*}
%  		\mathbf{W}_a^{(r+1)} = \mathbf{w}_a^{(r)} - \ell_a\frac{\partial\delta_a}{\partial\mathbf{W}_a}\\
%  		=\mathbf{W}_a^{(r)} - \ell_a\left(-\bm{\Sigma}^T\mathbf{U}^{[d]} + \bm{\Sigma}^T \bm{\Sigma}\mathbf{W}				_a^{(r)}\right)\\
%  		= \mathbf{w}_a^{(r)}-\ell_a \bm{\Sigma}^T\left(\bm{\Sigma}\mathbf{W}_a^{(r)} - \mathbf{U}^{[d]}\right)
%	\end{multline*}
%\end{enumerate}

\begin{figure}
    \centering
		\includegraphics[width=0.80\linewidth]{figs/img/steeringSimulinkBlock}
	\caption{Steering Neural Network Simulink Model}
    \label{fig:steeringNeuralNetwork}
\end{figure}

\begin{figure}
    \centering
		\includegraphics[width=0.80\linewidth]{figs/img/accelerationSimulinkBlock}
	\caption{Acceleration Neural Network Simulink Model}
    \label{fig:accelNeuralNetwork}
\end{figure}

\begin{figure}
    \centering
		\includegraphics[width=0.80\linewidth]{figs/img/brakeSimulinkBlock}
	\caption{Brake Neural Network Simulink Model}
    \label{fig:brakeNeuralNetwork}
\end{figure}

\vskip -2.5cm
\end{alertblock}
%-----------------------------------------------------------
% Subsystem Block Diagram
%-----------------------------------------------------------


%-----------------------------------------------------------
% SIMULATION RESULTS
%-----------------------------------------------------------

\end{column} % End of third column

\begin{column}{\sepwid}\end{column}

\begin{column}{\onecolwid} % The fourth column

%-----------------------------------------------------------
% EXPERIMENTAL RESULTS
%-----------------------------------------------------------

\begin{alertblock}{Experimental Results}
\vskip 1cm
\begin{itemize}
    \item Preliminary model testing conducted before sending models to AutonomouStuff 
    \item Official testing conducted using dSPACE software and HIL Bench 
\end{itemize}
\begin{figure}
    \centering
    \fcolorbox{gray!10}{gray!10}{\includegraphics[height=.2\textheight,width=.95\textwidth,keepaspectratio=true]{figs/img/picturesVisitToAStuff/hilBenchAstuff.jpg}}
    \caption{Experimental Setup}
    \label{fig:Setup}
\end{figure}

\begin{figure}
    \centering
    \subfigure[][]{
    \includegraphics[angle=270,width=.4\textwidth,keepaspectratio=true]{figs/img/picturesVisitToAStuff/aStuffVisit2Nick}
    }
    \subfigure[][]{
    \includegraphics[angle=270,width=.4\textwidth,keepaspectratio=true]{figs/img/picturesVisitToAStuff/hilMeasurementHannah}
    }
    \caption{Verifying voltage measurements on the HIL Bench}
\end{figure}

\begin{figure}
    \centering
    \fcolorbox{gray!10}{gray!10}{\includegraphics[height=.15\textheight,width=.9\textwidth,keepaspectratio=true]{figs/img/aStuffValidationBrakeModel.jpg}}
    \caption{Model validation setup}
    \label{fig:Setup}
\end{figure}

\vskip 2cm
\end{alertblock}


%-----------------------------------------------------------
% Conclusion and Future Work
%-----------------------------------------------------------

\begin{alertblock}{Conclusion and Future Work}
\begin{itemize}
    \item Using Neural Networks produced more accurate models than System Identification 
   % \item PI controller greatly reduces steady-state error, however increases overshoot and settling time
    \vskip .75cm
    \item Test models using Hardware-in-the-Loop
    \item Create new vehicle controllers
\end{itemize}
\end{alertblock}

\end{column} % End of the fourth column

\end{columns} % End of all the columns in the poster

\end{frame} % End of the enclosing frame

\end{document}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:
